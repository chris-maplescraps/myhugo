+++
title = 'Langchain'
date = 2025-10-23T15:41:01+08:00
draft = false
slug = "de862c4"
description = ""
summary = ""
tags = [ "æŠ€æœ¯", "å¼€å‘" ]
categories = [ "tech" ]
cover = ""
author = "MapleScraps"

+++

# Langchain

##### LangChain æ˜¯ç”¨äºæ„å»ºåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰***åº”ç”¨ç¨‹åº*** çš„å¼€æºæ¡†æ¶ï¼ˆFrameworkï¼‰**  

---

##### LangChain æ ¸å¿ƒç†å¿µ  
- **ç»“æ„åŒ–** = æ¨¡å—æ¸…æ™° æ¯ä¸ªåŠŸèƒ½ï¼ˆ å¦‚æ¨¡å‹è°ƒç”¨ã€è®°å¿†ã€å·¥å…·ã€é“¾æ¡ ï¼‰éƒ½æ˜¯ç‹¬ç«‹æ¨¡å—ï¼Œåƒç§¯æœ¨ä¸€æ ·  
- **æ˜“ç»„åˆ** = åƒæ‹¼ç§¯æœ¨ ä¸åŒæ¨¡å—å¯ä»¥è‡ªç”±ç»„åˆï¼Œå¿«é€Ÿæ­å»ºå¤æ‚çš„åº”ç”¨  
- **æ˜“æ‰©å±•** = éšæ—¶åŠ æ–°åŠŸèƒ½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ¥å…¥æ–°çš„æ¨¡å‹ã€æ•°æ®æºæˆ–å·¥å…·  

---

##### LangChain æ¡†æ¶ä¸»è¦æ ¸å¿ƒæ¨¡å—ï¼š

1. **Models (æ¨¡å‹)**ï¼šå°è£…äº†ä¸ä¸åŒ LLM æä¾›å•†ï¼ˆå¦‚ OpenAI, HugingFaceï¼‰çš„è¿æ¥æ¥å£
2. **Prompts (æç¤ºè¯)**ï¼šæç¤ºè¯ç®¡ç†ï¼Œæ„å»ºï¼Œä¼˜åŒ–ï¼Œåºåˆ—åŒ–ï¼Œç„¶åå‘é€ç»™ LLM çš„æç¤ºè¯çš„å·¥å…·
3. **Chains (é“¾)**ï¼šå°†å¤šä¸ª LLM å’Œ / æˆ–å…¶ä»–ç»„ä»¶è¿æ¥åœ¨ä¸€èµ·å½¢æˆç«¯åˆ°ç«¯çš„åº”ç”¨
4. **Retrieval (æ£€ç´¢)**ï¼šç”¨äºä»å¤–éƒ¨æ•°æ®æºï¼ˆå¦‚å‘é‡æ•°æ®åº“ï¼‰è·å–ç›¸å…³æ–‡æ¡£ï¼Œè¿™æ˜¯ RAG çš„æ ¸å¿ƒ
5. **Agents (ä»£ç†)**ï¼šå†³å®šæ¨¡å‹é€šè¿‡å“ªä¸ªå·¥å…·åšå‡ºå†³ç­–ï¼Œé‡‡å–å“ªäº›è¡ŒåŠ¨ï¼Œæ‰§è¡Œ + è§‚å¯Ÿï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆ
6. **Memory**ï¼šä¿å­˜æ¨¡å‹äº¤äº’æ—¶ä¸Šä¸‹æ–‡çŠ¶æ€

-----

##### å¤§æ¨¡å‹å²—ä½
1. **å¤§æ¨¡å‹è¿ç»´ / Infra å·¥ç¨‹å¸ˆ**ï¼šç®—åŠ›èµ„æºå±‚ï¼ˆ ç®—åŠ› GPU ï¼‰
2. **æ•°æ®å¼€å‘å·¥ç¨‹å¸ˆ**ï¼šæ•°æ®å±‚ï¼ˆ å¤„ç†æµ·é‡æ•°æ® ï¼‰
3. **å¤§æ¨¡å‹åŸºåº§å·¥ç¨‹å¸ˆ**ï¼šé€šç”¨å¤§æ¨¡å‹ï¼ˆ ChatGPTï¼ŒDeepseekï¼Œé€šä¹‰ ï¼‰
4. **å¤§æ¨¡å‹åº”ç”¨å¼€å‘å·¥ç¨‹å¸ˆ**ï¼šåº”ç”¨å¤§æ¨¡å‹å±‚ï¼ˆ åŸºäºç‰¹å®šé¢†åŸŸå¤§æ¨¡å‹è®­ç»ƒ ï¼‰
5. **å¤§æ¨¡å‹å·¥ç¨‹åŒ–å·¥ç¨‹å¸ˆ**ï¼šåº”ç”¨å±‚å·¥ç¨‹åŒ–ï¼ˆ Bç«¯åº”ç”¨ï¼ŒCç«¯åº”ç”¨ï¼ŒGç«¯åº”ç”¨ ç»“åˆä¼ä¸šç°æœ‰çš„å‰åç«¯è°ƒç”¨å¤§æ¨¡å‹ ï¼‰

##### è§£é‡Šï¼š
- **Bç«¯ = ä¼ä¸šæ–¹**  
- **Cç«¯ = ç”¨æˆ·æ–¹**  
- **Gç«¯ = æ”¿åºœæ–¹**  

---

```mermaid
flowchart TD
    A[å‡†å¤‡æµ‹è¯•æ•°æ®] --> B[ç”¨å¯¹è¯åº”ç”¨éªŒè¯å¯è¡Œæ€§]
    B --> C{æ˜¯å¦è¦è¡¥å……çŸ¥è¯†?}
    C -->|æ˜¯| D[RAG]
    C -->|å¦| E{è¦å¯¹æ¥å…¶å®ƒç³»ç»Ÿ?}
    E -->|æ˜¯| F[Function Calling]
    E -->|å¦| G{å€¼å¾—å°è¯•å¾®è°ƒ?}
    G -->|æ˜¯| H[ç”¨å†å²æ•°æ®åš Fine-tuning]
    G -->|å¦| I((äº¤ä»˜))
```

---

##### å¤§æ¨¡å‹å¼€å‘ï¼Œå¦‚ä½•å¼€å§‹ï¼Ÿå¦‚ä½•é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆï¼Ÿä¸‹é¢æ˜¯å¸¸ç”¨æ€è·¯ï¼š
{{< figure 
  src="/images/llm deploy.png" 
  alt="Universal Image" 
  caption="å¤§æ¨¡å‹å¼€å‘"
  link="" 
  class="w-75 ma0" 
>}}
> [!NOTE] æ³¨æ„ï¼š å…¶ä¸­æœ€å®¹æ˜“è¢«å¿½ç•¥çš„ï¼Œæ˜¯å‡†å¤‡æµ‹è¯•æ•°æ®

---

##### AI Agent æ¶æ„ï¼š
{{< figure 
  src="/images/llm agent.png" 
  alt="Universal Image" 
  caption="å¤§æ¨¡å‹å¼€å‘"
  link="" 
  class="w-75 ma0" 
>}}
> **Agent = LLM + Memory + Tools + Planning + Action**

---

##### ä»€ä¹ˆæ˜¯RAGï¼š
{{< figure 
  src="/images/what_is_RAG.png" 
  alt="Universal Image" 
  caption="å¤§æ¨¡å‹å¼€å‘"
  link="" 
  class="w-75 ma0" 
>}}
> [!NOTE] è§£é‡Šï¼š
> æ£€ç´¢ --> å¢å¼º --> ç”Ÿæˆè¿‡ç¨‹ï¼š  
> - **æ£€ç´¢å¯ä»¥ç†è§£ä¸ºç¬¬10æ­¥**  
> - **å¢å¼ºç†è§£ä¸ºç¬¬12æ­¥ï¼ˆ è¿™é‡Œçš„æç¤ºè¯åŒ…å«æ£€ç´¢åˆ°çš„æ•°æ® ï¼‰**  
> - **ç”Ÿæˆç†è§£ä¸ºç¬¬15æ­¥**  
---

##### ä»€ä¹ˆæ˜¯RAGï¼š
{{< figure 
  src="/images/RAG work.png" 
  alt="Universal Image" 
  caption="å¤§æ¨¡å‹å¼€å‘"
  link="" 
  class="w-75 ma0" 
>}}
> [!NOTE] è¿™äº›è¿‡ç¨‹ä¸­çš„éš¾ç‚¹ï¼š
> **1.** æ–‡ä»¶è§£æ  
> **2.** æ–‡ä»¶åˆ‡å‰²  
> **3.** çŸ¥è¯†æ£€ç´¢  
> **4.** çŸ¥è¯†é‡æ’åº  
> 

---



##### ğŸ’¦ğŸ’¦ğŸ’¦ ä»¥ä¸‹ç¤ºä¾‹æ˜¯å®ç°åˆ©ç”¨ langchain å’Œ äº‘å¹³å° AI æ¨¡å‹åˆ›å»ºçš„ç”Ÿæˆå¼ AI

```py
from langchain.chains import ConversationChain
from langchain.memory import ConversationBufferMemory
from langchain_community.llms import Tongyi

# åˆ›å»ºä¸€ä¸ªå†…å­˜è®°å¿†å¯¹è±¡
memory = ConversationBufferMemory(return_message=True)

def get_respomse(prompt: str, api_key: str):
    model = Tongyi(model="qwen-max", api_key=api_key)
    chain = ConversationChain(llm=model, memory=memory)
    
    # å‘é€ç”¨æˆ·çš„è¯·æ±‚
    response = chain.invoke({"input": prompt})
    return response["response"]

if __name__ == '__main__':
    print(get_response("è¯·ç”¨Pythonè¾“å‡º1-10", api_key))
    
```



